[TOC]

[文档链接](https://xgboost.readthedocs.io/en/latest/python/python_api.html#)

# XGBoost核心对象

## 1. xgboost.DMatrix

```python
class xgboost.DMatrix(
    data,
    label=None,
    missing=None,
    weight=None,
    silent=False,
    feature_names=None,
    feature_types=None,
    nthread=None)
```

DMatrix是XGBoost内部使用的数据结构，在内存效率和训练速度都做了优化。

### 1.1 构造函数的参数

- data：它可以是如下类型：os.PathLike, string, numpy.array, scipy.sparse, pd.DataFrame, dt.Frame, cudf.DataFrame。如果data是string或者是os.PathLike，那么它表示libsvm格式的txt文件，csv文件(通过如下格式指定'path_to_csv?format=csv')，或者是xgboost可以读取的二进制文件。

- label：它可以是list, numpy的1-D array, 或者是cudf.DataFrame，表示训练数据的标签。

- missing：float类型，缺失值的默认值，如果没有指定，默认是np.nan。

- weight：list, 1-D的numpy array，cudf.DataFram，表示每个实例的权重。**注意**：对于排序任务，weights是每个group的权重。

- silent：boolean, 在构建过程中是否输出message。

- feature_names：list，为每个特征设置名字。

- feature_types：list，为每个特征设置类型。

- integer，用多少个线程来从numpy array中加载数据，如果设置为-1，表示用系统支持的最大线程。

### 1.2 DMatrix的属性和方法

- feature_names：list or None，获取特征的名称。

- feature_types：list or None，获取特征的types。

- get_base_margin()：float，DMatrix的幅度。

- get_float_info(field)
  - 参数：field name
  - 返回值：array，数据的float信息。

- get_label()
  - 获取DMatrix的label
  - 返回array

- get_uint_info(field)
  - 获取DMatrix的无符号整数属性。
  - array

- get_weight()
  - 获取DMatrix的权重
  - 返回：array

- num_col()
  - 获取列的数量
  - 返回：int

- num_row()
  - 获取行数量
  - 返回：int

- save_binary(fname, silent=True)
  - 保存DMatrix数据，保存的数据可以用DMatrix加载。
  - fname：string，os.PathLike，要保存的文件名称。
  - silent：设置为True，则输出被压制。

- set_base_margin(margin)
  - 设置booster开始的边界。
  - 可以设定一个已有模型的输出值作为提升的起始值。
  - margin: array like。

- set_float_info(field, data)
  - 设置浮点类型属性到DMatrix