[TOC]

# Python函数参数指定类型

从python3.5开始，PEP484提案为Python引入了类型提示(type hints)。允许在创建函数时，为函数的参数和返回值指定类型。还有，在创建临时变量时，为变量指定类型。

主要有以下功能：

1. 方便类型检查，避免参数和返回值类型和预期不一致的情形。
2. 方便函数的调用者了解函数的参数和返回值信息。
3. 加入这个功能不会影响程序的运行，不会报正式的错误，只会帮助IDE做type检查。

常用类型：

- int,long,float: 整型,长整形,浮点型
- bool,str: 布尔型，字符串类型
- List, Tuple, Dict, Set: 列表，元组，字典, 集合
- Iterable,Iterator: 可迭代类型，迭代器类型
- Generator: 生成器类型

## 1. 用法举例

下面给出一些简单的例子，其他更多的内容查看参考信息。

### 1.1 指定基本类型

```python
def test(a:int, b:str) -> str:
    print(a, b)
    return 1000

if __name__ == '__main__':
    test('test', 'abc')
```

### 1.2 复杂类型指定

```python
from typing import List
Vector = List[float]

def scale(scalar: float, vector: Vector) -> Vector:
    return [scalar * num for num in vector]

# typechecks; a list of floats qualifies as a Vector.
new_vector = scale(2.0, [1.0, -4.2, 5.4])

###########################

from typing import Dict, Tuple, Sequence

ConnectionOptions = Dict[str, str]
Address = Tuple[str, int]
Server = Tuple[Address, ConnectionOptions]

def broadcast_message(message: str, servers: Sequence[Server]) -> None:
    ...

# The static type checker will treat the previous type signature as
# being exactly equivalent to this one.
def broadcast_message(
    message: str,
    servers: Sequence[Tuple[Tuple[str, int], Dict[str, str]]]) -> None:
    ...
):
    ...
```

### 1.3 泛型指定

```python
from typing import Sequence, TypeVar, Union

T = TypeVar('T')      # Declare type variable

def first(l: Sequence[T]) -> T:   # Generic function
    return l[0]

T = TypeVar('T')  # Can be anything
A = TypeVar('A', str, bytes)  # Must be str or bytes
A = Union[str, None] # Must be str or None
```

### 1.4 创建临时变量时指定

```python
from typing import NamedTuple

class Employee(NamedTuple):
    name: str
    id: int = 3

employee = Employee('Guido')
assert employee.id == 3
```

## 参考

1. [python限定方法参数类型、返回值类型、变量类型等](https://www.cnblogs.com/linkenpark/p/11676297.html)
2. [pep484官方文档](https://www.python.org/dev/peps/pep-0484/)
