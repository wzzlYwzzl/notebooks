[TOC]

# 有关代理的知识

## 1. 代理IP获取方法

### 1.1 免费代理获取

免费代理获取方法：在github上搜索“代理IP”，可以得到一些别人封装好的获取代理IP的方法。这些工具会从免费提供代理IP的网页中爬取代理信息。

可用的比如有：
jhao104/proxy_pool
imWildCat/scylla
SpiderClub/haipproxy

### 1.2 付费代理

百度上搜索会有很多，选择之前多看网上的对比贴。

## 2. 代理的匿名等级

匿名等级包括：高度匿名、普通匿名和透明代理。

- 高级匿名
  代理不改变client的请求，这样在服务器看来就和真正的浏览器访问是一样的，服务器无法看到客户端的IP地址，也不会认识到client在使用代理。

- 普通匿名
  普通匿名代理能够隐藏client的IP地址，但是会改变我们的请求，比如添加X-Forwarded-For header，虽然server端不知道你的IP，但任然能够知道你是代理。

- 透明代理
  不但改变我们的请求，还会传输client的真实IP地址。

## 3. 和代理相关的Http头

REMOTE_ADDR=
HTTP_VIA=
HTTP_X_FORWARDED_FOR=

### 3.1 没有使用代理

REMOTE_ADDR=你的IP
HTTP_VIA=没有值或者不显示
HTTP_X_FORWARDED_FOR=没数值或不显示

### 3.2 使用透明代理

REMOTE_ADDR=代理服务器IP
HTTP_VIA=代理服务器IP（这个字段是由代理服务器填充的，所以可能是网关的信息）
HTTP_X_FORWARDED_FOR=包含client真实IP的IP列表

### 3.3 使用普通匿名代理

REMOTE_ADDR=代理服务的IP
HTTP_VIA=代理服务器IP
HTTP_X_FORWARDED_FOR=代理服务器IP

这个会隐藏client的IP，但是向server仍透漏了是使用代理的方式访问它们。

### 3.4 欺骗性代理服务器

REMOTE_ADDR=代理服务IP
HTTP_VIA=代理服务器IP
HTTP_X_FORWARDED_FOR=随机的IP

### 3.5 高匿名代理服务器

REMOTE_ADDR=代理服务器IP
HTTP_VIA=没有值或不显示
HTTP_X_FORWARDED_FOR=没有值或不显示
